From 0355c092ce86a25110a8b91df0a45b92e5730fe7 Mon Sep 17 00:00:00 2001
From: Sebastian Pipping <sebastian@pipping.org>
Date: Sun, 17 Feb 2013 05:08:17 +0100
Subject: [PATCH] Handle "Not supported: indent-number" exception

---
 lightcrafts/src/com/lightcrafts/utils/xml/XMLUtil.java     | 6 +++++-
 lightcrafts/src/com/lightcrafts/utils/xml/XmlDocument.java | 6 +++++-
 2 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/lightcrafts/src/com/lightcrafts/utils/xml/XMLUtil.java b/lightcrafts/src/com/lightcrafts/utils/xml/XMLUtil.java
index a7ed7fe..ac5c406 100644
--- a/lightcrafts/src/com/lightcrafts/utils/xml/XMLUtil.java
+++ b/lightcrafts/src/com/lightcrafts/utils/xml/XMLUtil.java
@@ -3,6 +3,7 @@
 package com.lightcrafts.utils.xml;
 
 import java.io.*;
+import java.lang.IllegalArgumentException;
 import java.util.ArrayList;
 
 import javax.xml.parsers.DocumentBuilder;
@@ -435,7 +436,10 @@ public final class XMLUtil {
         catch ( Exception e ) {
             throw new IllegalStateException( e );
         }
-        m_xformFactory.setAttribute( "indent-number", "2" );
+        try {
+            m_xformFactory.setAttribute( "indent-number", "2" );
+        } catch ( IllegalArgumentException e ) {
+        }
     }
 }
 /* vim:set et sw=4 ts=4: */
diff --git a/lightcrafts/src/com/lightcrafts/utils/xml/XmlDocument.java b/lightcrafts/src/com/lightcrafts/utils/xml/XmlDocument.java
index e7f69a7..407ca17 100644
--- a/lightcrafts/src/com/lightcrafts/utils/xml/XmlDocument.java
+++ b/lightcrafts/src/com/lightcrafts/utils/xml/XmlDocument.java
@@ -14,6 +14,7 @@ import javax.xml.transform.dom.DOMSource;
 import javax.xml.transform.stream.StreamResult;
 import javax.xml.transform.stream.StreamSource;
 import java.io.*;
+import java.lang.IllegalArgumentException;
 import java.util.Arrays;
 
 /**
@@ -50,7 +51,10 @@ public class XmlDocument {
             Transformers = TransformerFactory.newInstance();
             // Here's how one controls XML output indentation in Java 1.5:
             if (System.getProperty("java.version").startsWith("1.5")) {
-                Transformers.setAttribute("indent-number", "2");
+                try {
+                    Transformers.setAttribute("indent-number", "2");
+                } catch (IllegalArgumentException e) {
+                }
             }
         }
         catch (TransformerFactoryConfigurationError e) {
-- 
1.8.1.2

